<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>plugin: Availabe plugins</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">plugin
   &#160;<span id="projectnumber">0.1.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">Availabe plugins </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p><a class="anchor" id="md_src_plugin_README"></a> </p>
<h1><a class="anchor" id="autotoc_md1"></a>
Templates</h1>
<p>The available templates are:</p>
<ul>
<li><code>template_source.cpp</code> for implementing source plugins</li>
<li><code>template_sink.cpp</code> for implementing sink plugins</li>
<li><code>template_filter.cpp</code> for implementing filter plugins</li>
</ul>
<p>Use these files as a starting point for your own plugins.</p>
<h1><a class="anchor" id="autotoc_md2"></a>
Example plugins</h1>
<p>The followings are example plugins of little practucalu use, but they are good for learning the basics of plugin development.</p>
<ul>
<li><code>clock</code>: a source that provides clock values</li>
<li><code>echoj</code>: a filter that echoes the input message</li>
<li><code>random</code>: a source that provides random values</li>
<li><code>to_console</code>: a sink that prints the input message to the console</li>
<li><code>twice</code>: a filter that duplicates the input message</li>
</ul>
<h1><a class="anchor" id="autotoc_md3"></a>
Plugins of actual use</h1>
<h2><a class="anchor" id="autotoc_md4"></a>
MQTT</h2>
<p>This acts as a source plugin, which reads messages from an MQTT broker and sends them to the MADS broker.</p>
<p>Note that the plugin <b>only subscribes to the topic as specified in the configuration file</b> and does not publish any messages.</p>
<p>The <b>frequency</b> of messages depends on when they are received from the MQTT broker. The plugin will send the messages to the MADS broker as soon as they are received.</p>
<h3><a class="anchor" id="autotoc_md5"></a>
Parameters</h3>
<p>The accepted parameters are:</p>
<div class="fragment"><div class="line">[mqtt]</div>
<div class="line">broker_host = &quot;localhost&quot;</div>
<div class="line">broker_port = 1883</div>
<div class="line">topic = &quot;capture/#&quot;</div>
</div><!-- fragment --><h3><a class="anchor" id="autotoc_md6"></a>
Notes</h3>
<p>The MQTT broker must be running on the same address that has been set into the Siemens MindSphere settings. The root publishing topic (e.g. <code>capture</code>) is defined in the settings of the Siemens MindSphere application, while each acquisition procedure defined in the Edge internal webapp will append a unique identifier to the root topic (e.g. <code>capture/mads</code>). So, you typically want to subscribe to <code>capture/#</code> to get all the messages.</p>
<h2><a class="anchor" id="autotoc_md7"></a>
Serial Reader</h2>
<p>This acts as a source plugin, which reads messages from a serial port (typically connected to an Arduino) and sends them to the MADS broker.</p>
<p>The <b>frequency</b> of messages depends on the configuration of the Arduino board. The plugin will send the messages to the MADS broker as soon as they are received from the Arduino board. In turn, this frequency can be set in the configuration file (<code>cfg_cmd</code> parameter).</p>
<h3><a class="anchor" id="autotoc_md8"></a>
Parameters</h3>
<p>The accepted parameters are:</p>
<div class="fragment"><div class="line">[serial_reader]</div>
<div class="line">port=&quot;/dev/ttyACM0&quot;</div>
<div class="line">baudrate=115200</div>
<div class="line"># Arduino config serial command</div>
<div class="line">cfg_cmd = &quot;40p&quot;</div>
</div><!-- fragment --><h3><a class="anchor" id="autotoc_md9"></a>
Notes</h3>
<p>The <code>cfg_cmd</code> parameter is used to configure the Arduino board. The default value is <code>40p</code>, which sets the Arduino board to send a message every 40 ms.</p>
<h2><a class="anchor" id="autotoc_md10"></a>
Running average</h2>
<p>This acts as a filter plugin, which calculates the running average of the input values.</p>
<h3><a class="anchor" id="autotoc_md11"></a>
Parameters</h3>
<p>The accepted parameters are:</p>
<div class="fragment"><div class="line">[running_avg]</div>
<div class="line">sub_topic = [&quot;serial_reader&quot;]</div>
<div class="line">capa = 10          # running window size</div>
<div class="line">field = &quot;data&quot;     # agerage all values in the dictionary &quot;data&quot;</div>
<div class="line">out_field = &quot;avg&quot;  # output field</div>
</div><!-- fragment --><h3><a class="anchor" id="autotoc_md12"></a>
Notes</h3>
<p>It searches for a field in the message payload having the name specified in the <code>field</code> parameter. the data field must be a dictionary. of numerical values, e.g.:</p>
<div class="fragment"><div class="line">{</div>
<div class="line">  &quot;data&quot;: {</div>
<div class="line">    &quot;value1&quot;: 1,</div>
<div class="line">    &quot;value2&quot;: 2,</div>
<div class="line">    &quot;value3&quot;: 3</div>
<div class="line">  }</div>
<div class="line">}</div>
</div><!-- fragment --><p>The plugin will calculate the average of all the values in the dictionary and store it in a new field, whose name is specified in the <code>out_field</code> parameter:</p>
<div class="fragment"><div class="line">{</div>
<div class="line">  &quot;avg&quot;: {</div>
<div class="line">    &quot;value1&quot;: 1,</div>
<div class="line">    &quot;value2&quot;: 2,</div>
<div class="line">    &quot;value3&quot;: 3</div>
<div class="line">  }</div>
<div class="line">}</div>
</div><!-- fragment --> </div></div><!-- PageDoc -->
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1
</small></address>
</body>
</html>
